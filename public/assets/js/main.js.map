{"version":3,"sources":["main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["\"use strict\";\n//variables\nconst inputSearch = document.querySelector(\".js-input-search\");\nconst submitBtn = document.querySelector(\".js-submit-btn\");\nconst resetBtn = document.querySelector(\".js-reset-btn\");\n//lista de resultados\nconst searchResults = document.querySelector(\".js-result-list\");\n//lista de favoritos\nconst favResults = document.querySelector(\".js-fav-list\");\nlet id = \"\";\n\nlet animes = [];\nlet favAnimes = [];\n\nfunction getUserInput(ev) {\n  ev.preventDefault();\n  fetch(`https://api.jikan.moe/v3/search/anime?q=${inputSearch.value}`)\n    .then((response) => response.json())\n    .then((animesData) => {\n      animes = animesData.results;\n      /*for (const anime of animes) {\n  id = anime.mal_id;\n}*/\n      renderResults();\n    });\n}\n\n//Pintar resultados\nfunction renderResults() {\n  searchResults.innerHTML = \"\";\n  for (let i = 0; i < animes.length; i++) {\n    const anime = animes[i];\n    //id = anime.mal_id;\n    searchResults.innerHTML += `<li class='li-element js-li-element' id='${\n      anime.mal_id\n    }'><img class='anime-img' src='${\n      anime.image_url ||\n      \"https://via.placeholder.com/210x295/ffffff/666666/?text=TV\"\n    }><h3 class='anime-title'>${anime.title}</h3></li>'`;\n  }\n  handlerClickedAnime();\n}\n\n//Pintar resultados favoritos\nfunction renderFavResults() {\n  favResults.innerHTML = \"\";\n  for (let i = 0; i < favAnimes.length; i++) {\n    const favAnime = favAnimes[i];\n    //id = favAnime.mal_id;\n    console.log(id);\n    favResults.innerHTML += `<li class='li-element js-li-element fav' id='${\n      favAnime.mal_id\n    }'><img class='anime-img' src='${\n      favAnime.image_url ||\n      \"https://via.placeholder.com/210x295/ffffff/666666/?text=TV\"\n    }><h3 class='anime-title'>${\n      favAnime.title\n    }</h3></li>'<i class=\"fas fa-times\"></i>`;\n  }\n  handlerClickedAnime();\n}\n\n//Añadir resultado a favoritos\nfunction handlerClickedFav(ev) {\n  const clickedAnime = parseInt(ev.currentTarget.id);\n  const favClicked = favAnimes.findIndex((fav) => {\n    return fav.mal_id === clickedAnime;\n  });\n  if (favClicked === -1) {\n    const animeAdd = animes.find((animeElement) => {\n      return animeElement.mal_id === clickedAnime;\n    });\n    favAnimes.push(animeAdd);\n  } else {\n    favAnimes.splice(favClicked, 1);\n  }\n  //pintar favoritos\n  renderFavResults();\n  //guardar favoritos\n  setInLocalStorage();\n}\n\n//Seleccionar elemento de la lista de resultados\nfunction handlerClickedAnime() {\n  const animesListened = document.querySelectorAll(\".js-li-element\");\n  for (const animeListened of animesListened) {\n    //selección y evento\n    animeListened.addEventListener(\"click\", handlerClickedFav);\n  }\n}\n\n//localizar y convertir favorito para guardar en local\nfunction setInLocalStorage() {\n  const toString = JSON.stringify(favAnimes);\n  localStorage.setItem(\"anime\", toString);\n}\n//guardar elemento favorito en local\nfunction getInLocalStorage() {\n  const localStorageFavAnimes = localStorage.getItem(\"anime\");\n  favAnimes = JSON.parse(localStorageFavAnimes);\n  if (favAnimes === null) {\n    favAnimes = [];\n  } else {\n    renderFavResults();\n  }\n}\n//importante activar esto\ngetInLocalStorage();\n\n//Botón reset\nfunction handlerResetBtn() {\n  location.reload();\n}\n\n//Evento submit\nsubmitBtn.addEventListener(\"click\", getUserInput);\n//Evento reset\nresetBtn.addEventListener(\"click\", handlerResetBtn);\n"]}